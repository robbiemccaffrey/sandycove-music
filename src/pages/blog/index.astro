---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import ContactForm from '../../components/ContactForm.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog')).sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf()
);

const breadcrumbSchema = {
  '@context': 'https://schema.org',
  '@type': 'BreadcrumbList',
  itemListElement: [
    {
      '@type': 'ListItem',
      position: 1,
      name: 'Home',
      item: 'https://sandycoveschoolofmusic.com',
    },
    {
      '@type': 'ListItem',
      position: 2,
      name: 'Blog',
      item: 'https://sandycoveschoolofmusic.com/blog',
    },
  ],
};
---

<Layout title="Piano Lessons Blog | Tips & Guides â€” Sandycove School of Music" description="Tips, guides, and insights on piano lessons, music exam preparation, and making the most of your musical education. Expert advice from Sandycove School of Music in Dun Laoghaire.">
  <Header />
  <main class="flex-1 pt-24 pb-20">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <!-- Breadcrumbs -->
      <nav aria-label="Breadcrumb" class="mb-8">
        <ol class="flex items-center gap-2 text-sm text-navy-400">
          <li>
            <a href="/" class="hover:text-gold-500 transition-colors">Home</a>
          </li>
          <li aria-hidden="true">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
          </li>
          <li class="text-navy-600 font-medium" aria-current="page">Blog</li>
        </ol>
      </nav>

      <div class="text-center mb-12">
        <h1 class="text-3xl sm:text-4xl font-bold text-navy-900 mb-4" style="font-family: 'Playfair Display', Georgia, serif;">Piano Lessons Blog</h1>
        <div class="w-16 h-1 bg-gold-500 mx-auto mb-6"></div>
        <p class="text-navy-600 text-lg max-w-2xl mx-auto">Tips, guides, and insights on music education and exam preparation.</p>
      </div>

      <div class="space-y-6">
        {posts.map((post) => {
          const formattedDate = new Intl.DateTimeFormat('en-IE', {
            day: 'numeric',
            month: 'long',
            year: 'numeric',
          }).format(post.data.date);

          return (
            <a
              href={`/blog/${post.slug}`}
              class="block group rounded-2xl border border-navy-100 bg-white p-6 sm:p-8 shadow-sm hover:shadow-md hover:border-gold-400 transition-all"
            >
              <div class="flex items-center gap-3 mb-3">
                <time datetime={post.data.date.toISOString()} class="text-sm text-navy-400">
                  {formattedDate}
                </time>
                {post.data.tags.length > 0 && (
                  <div class="flex gap-2 flex-wrap">
                    {post.data.tags.map((tag) => (
                      <span class="text-xs px-2 py-0.5 rounded-full bg-gold-50 text-gold-600 border border-gold-200 font-medium">
                        {tag}
                      </span>
                    ))}
                  </div>
                )}
              </div>
              <h2 class="text-xl sm:text-2xl font-bold text-navy-900 group-hover:text-gold-600 transition-colors mb-2" style="font-family: 'Playfair Display', Georgia, serif;">
                {post.data.title}
              </h2>
              <p class="text-navy-500 leading-relaxed">
                {post.data.description}
              </p>
              <span class="inline-flex items-center gap-1 mt-4 text-sm font-medium text-gold-500 group-hover:text-gold-600">
                Read more
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                </svg>
              </span>
            </a>
          );
        })}
      </div>
    </div>
  </main>
  <ContactForm />
  <Footer />

  <script type="application/ld+json" set:html={JSON.stringify(breadcrumbSchema)} />
</Layout>
