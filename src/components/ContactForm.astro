---
---

<section id="contact" class="py-20 bg-navy-50">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="max-w-3xl mx-auto text-center mb-12">
      <h2 class="text-3xl sm:text-4xl font-bold text-navy-900 mb-4" style="font-family: 'Playfair Display', Georgia, serif;">Get in Touch</h2>
      <div class="w-16 h-1 bg-gold-500 mx-auto mb-6"></div>
      <p class="text-navy-600 text-lg">Ready to start your musical journey? Send us a message and we'll get back to you shortly. You can also call us on <a href="tel:+353868729764" class="text-gold-500 hover:text-gold-600 font-semibold">086 872 9764</a>.</p>
    </div>

    <form id="contact-form" class="max-w-xl mx-auto bg-white rounded-2xl border border-navy-100 shadow-sm p-8 space-y-6">
      <div>
        <label for="name" class="block text-sm font-medium text-navy-700 mb-1">Name</label>
        <input
          type="text"
          id="name"
          name="name"
          required
          class="w-full px-4 py-3 rounded-lg bg-navy-50 border border-navy-200 text-navy-900 placeholder-navy-300 focus:outline-none focus:ring-2 focus:ring-gold-400 focus:border-transparent transition-colors"
          placeholder="Your name"
        />
      </div>

      <div>
        <label for="email" class="block text-sm font-medium text-navy-700 mb-1">Email</label>
        <input
          type="email"
          id="email"
          name="email"
          required
          class="w-full px-4 py-3 rounded-lg bg-navy-50 border border-navy-200 text-navy-900 placeholder-navy-300 focus:outline-none focus:ring-2 focus:ring-gold-400 focus:border-transparent transition-colors"
          placeholder="you@example.com"
        />
      </div>

      <div>
        <label for="phone" class="block text-sm font-medium text-navy-700 mb-1">Phone <span class="text-navy-300">(optional)</span></label>
        <input
          type="tel"
          id="phone"
          name="phone"
          class="w-full px-4 py-3 rounded-lg bg-navy-50 border border-navy-200 text-navy-900 placeholder-navy-300 focus:outline-none focus:ring-2 focus:ring-gold-400 focus:border-transparent transition-colors"
          placeholder="Your phone number"
        />
      </div>

      <div>
        <label for="message" class="block text-sm font-medium text-navy-700 mb-1">Message</label>
        <textarea
          id="message"
          name="message"
          required
          rows="5"
          class="w-full px-4 py-3 rounded-lg bg-navy-50 border border-navy-200 text-navy-900 placeholder-navy-300 focus:outline-none focus:ring-2 focus:ring-gold-400 focus:border-transparent transition-colors resize-y"
          placeholder="Tell us about your musical goals, experience, and preferred lesson times..."
        ></textarea>
      </div>

      <div id="form-feedback" class="hidden rounded-lg px-4 py-3 text-sm"></div>

      <button
        type="submit"
        class="w-full px-8 py-3 rounded-full text-lg font-semibold bg-gold-500 text-white hover:bg-gold-600 transition-colors shadow-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"
      >
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
        </svg>
        Send Message
      </button>
    </form>
  </div>
</section>

<script>
  const form = document.getElementById('contact-form') as HTMLFormElement;
  const feedback = document.getElementById('form-feedback')!;

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    const btn = form.querySelector('button[type="submit"]') as HTMLButtonElement;
    btn.disabled = true;
    btn.innerHTML = '<svg class="w-5 h-5 animate-spin" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path></svg> Sending...';
    feedback.classList.add('hidden');

    const data = {
      name: (form.querySelector('#name') as HTMLInputElement).value.trim(),
      email: (form.querySelector('#email') as HTMLInputElement).value.trim(),
      phone: (form.querySelector('#phone') as HTMLInputElement).value.trim(),
      message: (form.querySelector('#message') as HTMLTextAreaElement).value.trim(),
    };

    try {
      const res = await fetch('/api/contact', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data),
      });

      if (res.ok) {
        feedback.textContent = 'Thank you! Your message has been sent. We\'ll be in touch soon.';
        feedback.className = 'rounded-lg px-4 py-3 text-sm bg-green-50 text-green-700 border border-green-200';
        form.reset();
      } else {
        const err = await res.json().catch(() => ({}));
        feedback.textContent = err.error || 'Something went wrong. Please try again or email us directly.';
        feedback.className = 'rounded-lg px-4 py-3 text-sm bg-red-50 text-red-700 border border-red-200';
      }
    } catch {
      feedback.textContent = 'Network error. Please check your connection and try again.';
      feedback.className = 'rounded-lg px-4 py-3 text-sm bg-red-50 text-red-700 border border-red-200';
    }

    btn.disabled = false;
    btn.innerHTML = '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg> Send Message';
  });
</script>
